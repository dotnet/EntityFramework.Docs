<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Related Data </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Related Data ">
    <meta name="generator" content="docfx 2.5.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="saving/related-data">
              <h1 id="related-data" sourcefile="saving/related-data.md" sourcestartlinenumber="4" sourceendlinenumber="4">Related Data</h1>
              
<div class="WARNING sourceFile=" saving/related-data.md"="" sourcestartlinenumber="6" sourceendlinenumber="6" "=""><h5>Warning</h5><p sourcefile="saving/related-data.md" sourcestartlinenumber="7" sourceendlinenumber="7">This documentation is for EF Core. For EF6.x and earlier release see <a href="http://msdn.com/data/ef" sourcefile="saving/related-data.md" sourcestartlinenumber="7" sourceendlinenumber="7"><a href="http://msdn.com/data/ef" sourcefile="saving/related-data.md" sourcestartlinenumber="7" sourceendlinenumber="7">http://msdn.com/data/ef</a></a>.</p>
</div>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="9" sourceendlinenumber="9">In addition to isolated entities, you can also make use of the relationships defined in your model.</p>
<div class="TIP sourceFile=" saving/related-data.md"="" sourcestartlinenumber="11" sourceendlinenumber="11" "=""><h5>Tip</h5><p sourcefile="saving/related-data.md" sourcestartlinenumber="12" sourceendlinenumber="12">You can view this article&#39;s <a href="https://github.com/aspnet/EntityFramework.Docs/tree/master/samples/Saving/Saving/RelatedData/" sourcefile="saving/related-data.md" sourcestartlinenumber="12" sourceendlinenumber="12">sample</a> on GitHub.</p>
</div>
<h2 id="adding-a-graph-of-new-entities" sourcefile="saving/related-data.md" sourcestartlinenumber="14" sourceendlinenumber="14">Adding a graph of new entities</h2>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="16" sourceendlinenumber="16">If you create several new related entities, adding one of them to the context will cause the others to be added too.</p>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="18" sourceendlinenumber="18">In the following example, the blog and three related posts are all inserted into the database. The posts are found and added, because they are reachable via the <code>Blog.Posts</code> navigation property.</p>
<!-- [!code-csharp[Main](samples/Saving/Saving/RelatedData/Sample.cs)] -->
<pre sourcefile="saving/related-data.md" sourcestartlinenumber="21" sourceendlinenumber="38"><code class="lang-csharp">        using (var context = new BloggingContext())
        {
            var blog = new Blog
            {
                Url = &quot;http://blogs.msdn.com/dotnet&quot;,
                Posts = new List&lt;Post&gt;
                {
                    new Post { Title = &quot;Intro to C#&quot; },
                    new Post { Title = &quot;Intro to VB.NET&quot; },
                    new Post { Title = &quot;Intro to F#&quot; }
                }
            };

            context.Blogs.Add(blog);
            context.SaveChanges();
        }
</code></pre><h2 id="adding-a-related-entity" sourcefile="saving/related-data.md" sourcestartlinenumber="40" sourceendlinenumber="40">Adding a related entity</h2>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="42" sourceendlinenumber="42">If you reference a new entity from the navigation property of an entity that is already tracked by the context, the entity will be discovered and inserted into the database.</p>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="44" sourceendlinenumber="44">In the following example, the <code>post</code> entity is inserted because it is added to the <code>Posts</code> property of the <code>blog</code> entity which was fetched from the database.</p>
<!-- [!code-csharp[Main](samples/Saving/Saving/RelatedData/Sample.cs)] -->
<pre sourcefile="saving/related-data.md" sourcestartlinenumber="47" sourceendlinenumber="56"><code class="lang-csharp">        using (var context = new BloggingContext())
        {
            var blog = context.Blogs.First();
            var post = new Post { Title = &quot;Intro to EF Core&quot; };

            blog.Posts.Add(post);
            context.SaveChanges();
        }
</code></pre><h2 id="changing-relationships" sourcefile="saving/related-data.md" sourcestartlinenumber="58" sourceendlinenumber="58">Changing relationships</h2>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="60" sourceendlinenumber="60">If you change the navigation property of an entity, the corresponding changes will be made to the foreign key column in the database.</p>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="62" sourceendlinenumber="62">In the following example, the <code>post</code> entity is updated to belong to the new <code>blog</code> entity because its <code>Blog</code> navigation property is set to point to <code>blog</code>. Note that <code>blog</code> will also be inserted into the database because it is a new entity that is referenced by the navigation property of an entity that is already tracked by the context (<code>post</code>).</p>
<!-- [!code-csharp[Main](samples/Saving/Saving/RelatedData/Sample.cs)] -->
<pre sourcefile="saving/related-data.md" sourcestartlinenumber="65" sourceendlinenumber="74"><code class="lang-csharp">        using (var context = new BloggingContext())
        {
            var blog = new Blog { Url = &quot;http://blogs.msdn.com/visualstudio&quot; };
            var post = context.Posts.First();

            blog.Posts.Add(post);
            context.SaveChanges();
        }
</code></pre><h2 id="removing-relationships" sourcefile="saving/related-data.md" sourcestartlinenumber="76" sourceendlinenumber="76">Removing relationships</h2>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="78" sourceendlinenumber="78">You can remove a relationship by setting a reference navigation to <code>null</code>, or removing the related entity from a collection navigation.</p>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="80" sourceendlinenumber="80">If a cascade delete is configured, the child/dependent entity will be deleted from the database, see <a href="cascade-delete.html" sourcefile="saving/related-data.md" sourcestartlinenumber="80" sourceendlinenumber="80">Cascade Delete</a> for more information. If no cascade delete is configured, the foreign key column in the database will be set to null (if the column does not accept nulls, an exception will be thrown).</p>
<p sourcefile="saving/related-data.md" sourcestartlinenumber="82" sourceendlinenumber="82">In the following example, a cascade delete is configured on the relationship between <code>Blog</code> and <code>Post</code>, so the <code>post</code> entity is deleted from the database.</p>
<!-- [!code-csharp[Main](samples/Saving/Saving/RelatedData/Sample.cs)] -->
<pre sourcefile="saving/related-data.md" sourcestartlinenumber="85" sourceendlinenumber="94"><code class="lang-csharp">        using (var context = new BloggingContext())
        {
            var blog = context.Blogs.Include(b =&gt; b.Posts).First();
            var post = blog.Posts.First();

            blog.Posts.Remove(post);
            context.SaveChanges();
        }
</code></pre>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shirhatti/EntityFramework.Docs/blob/export-qa-fixes/ef/saving/related-data.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright Â© 2015-2016 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
